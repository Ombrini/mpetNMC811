# TODO
- Merge `master` back into `secondaryParticles`
- Develop a test suite
- Extrapolate linearly for interp functions?
- Add `calc_Flux_diffn2` function to `mpetMaterials`
- Reorganize and rename files
    - `mpet.[main, consoleRun[, simMPET]]` -> `mpet.py`
    - or: `mpet.simMPET` -> `sim.py`
    - `mpet.[setupDataReporters, MyMATDataReporter]` -> `datareporting.py`
    - `mpet.modMPET` -> `mod_cell.py`
    - `mpetMaterials.[material equation models]` -> `mod_electrodes.py`
    - `mpetMaterials.[get_unit..., get_dr...]` + `muRfuncs.calc_curv` -> `geometry.py`
    - `elyteCST.py` -> `props_icp.py`
    - `muRfuncs` -> `props_ecp.py`
- Remove `mpetMaterials.[mu_ideal_sln, mu_reg_sln]`
- Fix `from daetools.pyDAE import *` -> `from pyDAE import dae`
- Clarify "type" --> intra-particle transport model (homog, FSL, CH(R), AC(R))
- Crash if `sim_output` exists but `history` does not
- Add hash to history filename time stamp?
- Add ability to specify input particle size distribution
- Support py3
- Widget to control frames in animations
- Implement both cwet and beta\_s for both geometry types -- alow input choice
- Implement CH eqn (Yi or simple FV style) for rectangular.
- Check over input checking
- Add Dsld(c) functionality
- Store more non-dim scales/refs via `paramsIO` and use in `plot_data.py`
- Move elyte calcs to a separate function and use that in `plot_data.py`
- Change behavior of `mpet.py` without argument -- search in `configDefaults` directory? throw exception?
- Pass cref into `elyte_CST.get_props`?
- DO NOT delete all contents of `sim_output` subdir, only overwrite
- Make a system for collecting warnings and printing them at the end of simulation.

## Test Suite List
- Functionality that should be tested in the suite:
    - LFP ACR C3
    - LFP CHR sphere
    - LFP CHR cylinder
    - LFP homog
    - LFP homog\_sdn (10 nm)
    - graphite (G) homog
    - G CHR2 cyl
    - G CHR2 sph
    - single volume
    - Li foil + sep + cathode
    - anode + sep + cathode
    - anode + cathode
    - cathode only
    - SM electrolyte
    - dilute electrolyte
    - solid-solution sphere
    - solid-solution cylinder
    - particle size distribution
    - CC/CV/CVsegments/CCsegments
    - with Rser
    - with bulkCond
    - with partCond
    - Vcutoff hi (discharge)
    - Vcutoff lo (charge)
    - Analytical comparison
        - linear transport in sphere
        - linear transport in cylinder
        - dilute semi-infinite elyte
    - Plotting (all?) types

# Done
- Adjust mpet.py to set mu\_lyte with the portFromElyte
- Add BV\_mod reaction rates to get\_rxn\_rate
- Fix get\_rxn\_rate function call for \_O notations to \_lyte notations
- Fix get\_eta function call to have optional mu\_R, T, etc.
- Make sure poros factors are right(?) in bulk conductivity
- Add series resistance
- Remove mpet\_matlab
- Make default params files
- Change c\_edges to harmonic mean in all CHR flux functions
- Set alpha/lambda to None for reaction models not requiring them
- Add echem reaction to Li electrode (reaction resistance on that side)
- Make "dilute" elyte model a special case of SM -- pass Dp and Dm into a SM function, generate kappa, tp
- Make noise an input option
- Make ISfuncs an input option
- Test elytecons with Nvol\_a = 0
- Clean mpetPorts of unused ports
- Reorg params\_IO to not do all the if type checks; assume all inputs present
- Don't require Omga, kappa, B for homog solidType -- require only if delPhiEqFit (mu\_Rfit) = false
- SM electrolyte activity -- figure out to work with BV
- Add 0D2var
- Add c1bar/c2bar plot, esp for homog2 sims
- Make tolerances input parameters
- Test logPad on both extremes with homog particle
- get rid of surf cond option
- No: Make ideal solution use Vstd input
- No: put cref into dD, pass dD into mu\_R\_h fits
- No: Change parameter dictionaries to objects? (ndD.td)
- Eliminate Vstd!
    - Create subfunctions in mu\_R\_h fits that call reg sln, ideal sln, etc. with proper constants
- Make mu\_R\_h (homog mu\_R) functions all in same file (ideal, reg sln, fit OCV, etc.)
    - return mu\_R\_h, a\_R\_h
    - For non-ss, return muR\_h if len(c) == 1 else return full muR
    - be consistent about where ISfuncs=None or required param
- Make diffn _require_ mu\_R(c) function; add ideal solid to mu\_Rfuncs file
- No: Make separate mu\_R-internal (for non-diffn) and mu\_R-surface (for all)
- params -- make homog call something from mu\_R\_h explicitly.
- Fix muR & c for primary particles -- they should be called as with SM to be able to pass these separately.
- No: Rename slddynamics0D[1var,2var] to remove [ ] part
- Make BV assume actR = ff for diffn model. Do this in calc\_rxn function
- No: Change mu\_O --> muO everywhere
- get\_unit\_solid\_discr should NOT depend on "Type," only "Shape"
- Move mass matrix generation out of sldDynamics functions.
- Rename mpet\_params\_IO --> mpetParamsIO
- Change Vset to actually be true set voltage (?), at least change so desc. is accurate (it's a (negative) step from eq'm init voltage)
- muRfuncs: have regSln[2] take only (y, ISfuncs), pass muRhomg=self.regSln[2] into general[1,2]param
- Rename noise class to InterpVector
- Incorporate current (and voltage) steps from Karen.
- Clean comments in mpetParamsIO.py
- Remove "coding" comments at top of files
- Move noise and ISfuncs classes to externFuncs.py
    - test logPad
    - test noise
    - test segments
- Replace dots in variable name outputs with underscores.
- Add seed for RNG for PSD for testing

\# vim: set tw=0:
